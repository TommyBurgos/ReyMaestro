/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/chess.js@0.12.0/chess.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var Chess=function(r){var e="b",n="w",t=-1,o="p",i="n",f="b",u="r",l="q",a="k",c="pnbrqkPNBRQK",s="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",p=["1-0","0-1","1/2-1/2","*"],v={b:[16,32,17,15],w:[-16,-32,-17,-15]},g={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},h=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],d=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],E={p:0,n:1,b:2,r:3,q:4,k:5},m={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},b={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},_=7,A=6,C=1,y=0,S={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},I={w:[{square:S.a1,flag:b.QSIDE_CASTLE},{square:S.h1,flag:b.KSIDE_CASTLE}],b:[{square:S.a8,flag:b.QSIDE_CASTLE},{square:S.h8,flag:b.KSIDE_CASTLE}]},T=new Array(128),w={w:t,b:t},P=n,R={w:0,b:0},L=t,O=0,N=1,k=[],q={},D={};function K(r){void 0===r&&(r=!1),T=new Array(128),w={w:t,b:t},P=n,R={w:0,b:0},L=t,O=0,N=1,k=[],r||(q={}),D={},M(j())}function Q(){for(var r=[],e={},n=function(r){r in D&&(e[r]=D[r])};k.length>0;)r.push(or());for(n(j());r.length>0;)tr(r.pop()),n(j());D=e}function U(){x(s)}function x(r,o){void 0===o&&(o=!1);var i=r.split(/\s+/),f=i[0],u=0;if(!$(r).valid)return!1;K(o);for(var l=0;l<f.length;l++){var a=f.charAt(l);if("/"===a)u+=8;else if(-1!=="0123456789".indexOf(a))u+=parseInt(a,10);else{var c=a<"a"?n:e;G({type:a.toLowerCase(),color:c},lr(u)),u++}}return P=i[1],i[2].indexOf("K")>-1&&(R.w|=b.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(R.w|=b.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(R.b|=b.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(R.b|=b.QSIDE_CASTLE),L="-"===i[3]?t:S[i[3]],O=parseInt(i[4],10),N=parseInt(i[5],10),M(j()),!0}function $(r){var e="No errors.",n="FEN string must contain six space-delimited fields.",t="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",f="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",l="1st field (piece positions) does not contain 8 '/'-delimited rows.",a="1st field (piece positions) is invalid [consecutive numbers].",c="1st field (piece positions) is invalid [invalid piece].",s="1st field (piece positions) is invalid [row too large].",p="Illegal en-passant square",v=r.split(/\s+/);if(6!==v.length)return{valid:!1,error_number:1,error:n};if(isNaN(v[5])||parseInt(v[5],10)<=0)return{valid:!1,error_number:2,error:t};if(isNaN(v[4])||parseInt(v[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(v[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(v[2]))return{valid:!1,error_number:5,error:f};if(!/^(w|b)$/.test(v[1]))return{valid:!1,error_number:6,error:u};var g=v[0].split("/");if(8!==g.length)return{valid:!1,error_number:7,error:l};for(var h=0;h<g.length;h++){for(var d=0,E=!1,m=0;m<g[h].length;m++)if(isNaN(g[h][m])){if(!/^[prnbqkPRNBQK]$/.test(g[h][m]))return{valid:!1,error_number:9,error:c};d+=1,E=!1}else{if(E)return{valid:!1,error_number:8,error:a};d+=parseInt(g[h][m],10),E=!0}if(8!==d)return{valid:!1,error_number:10,error:s}}return"3"==v[3][1]&&"w"==v[1]||"6"==v[3][1]&&"b"==v[1]?{valid:!1,error_number:11,error:p}:{valid:!0,error_number:0,error:e}}function j(){for(var r=0,o="",i=S.a8;i<=S.h1;i++){if(null==T[i])r++;else{r>0&&(o+=r,r=0);var f=T[i].color,u=T[i].type;o+=f===n?u.toUpperCase():u.toLowerCase()}i+1&136&&(r>0&&(o+=r),i!==S.h1&&(o+="/"),r=0,i+=8)}var l="";R[n]&b.KSIDE_CASTLE&&(l+="K"),R[n]&b.QSIDE_CASTLE&&(l+="Q"),R[e]&b.KSIDE_CASTLE&&(l+="k"),R[e]&b.QSIDE_CASTLE&&(l+="q"),l=l||"-";var a=L===t?"-":lr(L);return[o,P,l,a,O,N].join(" ")}function B(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(q[r[e]]=r[e+1]);return q}function M(r){k.length>0||(r!==s?(q.SetUp="1",q.FEN=r):(delete q.SetUp,delete q.FEN))}function W(r){var e=T[S[r]];return e?{type:e.type,color:e.color}:null}function G(r,e){if(!("type"in r)||!("color"in r))return!1;if(-1===c.indexOf(r.type.toLowerCase()))return!1;if(!(e in S))return!1;var n=S[e];return(r.type!=a||w[r.color]==t||w[r.color]==n)&&(T[n]={type:r.type,color:r.color},r.type===a&&(w[r.color]=n),M(j()),!0)}function F(r,e,n,t,i){var f={color:P,from:e,to:n,flags:t,piece:r[e].type};return i&&(f.flags|=b.PROMOTION,f.promotion=i),r[n]?f.captured=r[n].type:t&b.EP_CAPTURE&&(f.captured=o),f}function H(r){function e(r,e,n,t,a){if(r[n].type!==o||fr(t)!==y&&fr(t)!==_)e.push(F(r,n,t,a));else for(var c=[l,u,f,i],s=0,p=c.length;s<p;s++)e.push(F(r,n,t,a,c[s]))}var n=[],t=P,c=ar(t),s={b:C,w:A},p=S.a8,h=S.h1,d=!1,E=void 0===r||!("legal"in r)||r.legal,m=void 0===r||!("piece"in r)||"string"!=typeof r.piece||r.piece.toLowerCase();if(void 0!==r&&"square"in r){if(!(r.square in S))return[];p=h=S[r.square],d=!0}for(var I=p;I<=h;I++)if(136&I)I+=7;else{var O=T[I];if(null!=O&&O.color===t)if(O.type!==o||!0!==m&&m!==o){if(!0===m||m===O.type)for(var N=0,k=g[O.type].length;N<k;N++){var q=g[O.type][N];for(D=I;!(136&(D+=q));){if(null!=T[D]){if(T[D].color===t)break;e(T,n,I,D,b.CAPTURE);break}if(e(T,n,I,D,b.NORMAL),"n"===O.type||"k"===O.type)break}}}else{var D=I+v[t][0];if(null==T[D]){e(T,n,I,D,b.NORMAL);var D=I+v[t][1];s[t]===fr(I)&&null==T[D]&&e(T,n,I,D,b.BIG_PAWN)}for(N=2;N<4;N++){136&(D=I+v[t][N])||(null!=T[D]&&T[D].color===c?e(T,n,I,D,b.CAPTURE):D===L&&e(T,n,I,L,b.EP_CAPTURE))}}}if(!(!0!==m&&m!==a||d&&h!==w[t])){if(R[t]&b.KSIDE_CASTLE){var K=(Q=w[t])+2;null!=T[Q+1]||null!=T[K]||J(c,w[t])||J(c,Q+1)||J(c,K)||e(T,n,w[t],K,b.KSIDE_CASTLE)}if(R[t]&b.QSIDE_CASTLE){var Q;K=(Q=w[t])-2;null!=T[Q-1]||null!=T[Q-2]||null!=T[Q-3]||J(c,w[t])||J(c,Q-1)||J(c,K)||e(T,n,w[t],K,b.QSIDE_CASTLE)}}if(!E)return n;var U=[];for(I=0,k=n.length;I<k;I++)tr(n[I]),V(t)||U.push(n[I]),or();return U}function Z(r,e){var n="";if(r.flags&b.KSIDE_CASTLE)n="O-O";else if(r.flags&b.QSIDE_CASTLE)n="O-O-O";else{if(r.piece!==o){var t=function(r,e){for(var n=r.from,t=r.to,o=r.piece,i=0,f=0,u=0,l=0,a=e.length;l<a;l++){var c=e[l].from,s=e[l].to;o===e[l].piece&&n!==c&&t===s&&(i++,fr(n)===fr(c)&&f++,ur(n)===ur(c)&&u++)}if(i>0)return f>0&&u>0?lr(n):u>0?lr(n).charAt(1):lr(n).charAt(0);return""}(r,e);n+=r.piece.toUpperCase()+t}r.flags&(b.CAPTURE|b.EP_CAPTURE)&&(r.piece===o&&(n+=lr(r.from)[0]),n+="x"),n+=lr(r.to),r.flags&b.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return tr(r),X()&&(Y()?n+="#":n+="+"),or(),n}function z(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function J(r,t){for(var i=S.a8;i<=S.h1;i++)if(136&i)i+=7;else if(null!=T[i]&&T[i].color===r){var f=T[i],u=i-t,l=u+119;if(h[l]&1<<E[f.type]){if(f.type===o){if(u>0){if(f.color===n)return!0}else if(f.color===e)return!0;continue}if("n"===f.type||"k"===f.type)return!0;for(var a=d[l],c=i+a,s=!1;c!==t;){if(null!=T[c]){s=!0;break}c+=a}if(!s)return!0}}return!1}function V(r){return J(ar(r),w[r])}function X(){return V(P)}function Y(){return X()&&0===H().length}function rr(){return!X()&&0===H().length}function er(){for(var r={},e=[],n=0,t=0,o=S.a8;o<=S.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var u=T[o];u&&(r[u.type]=u.type in r?r[u.type]+1:1,u.type===f&&e.push(t),n++)}if(2===n)return!0;if(3===n&&(1===r[f]||1===r[i]))return!0;if(n===r[f]+2){var l=0,a=e.length;for(o=0;o<a;o++)l+=e[o];if(0===l||l===a)return!0}return!1}function nr(){for(var r=[],e={},n=!1;;){var t=or();if(!t)break;r.push(t)}for(;;){var o=j().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;tr(r.pop())}return n}function tr(r){var n=P,i=ar(n);if(function(r){k.push({move:r,kings:{b:w.b,w:w.w},turn:P,castling:{b:R.b,w:R.w},ep_square:L,half_moves:O,move_number:N})}(r),T[r.to]=T[r.from],T[r.from]=null,r.flags&b.EP_CAPTURE&&(P===e?T[r.to-16]=null:T[r.to+16]=null),r.flags&b.PROMOTION&&(T[r.to]={type:r.promotion,color:n}),T[r.to].type===a){if(w[T[r.to].color]=r.to,r.flags&b.KSIDE_CASTLE){var f=r.to-1,u=r.to+1;T[f]=T[u],T[u]=null}else if(r.flags&b.QSIDE_CASTLE){f=r.to+1,u=r.to-2;T[f]=T[u],T[u]=null}R[n]=""}if(R[n])for(var l=0,c=I[n].length;l<c;l++)if(r.from===I[n][l].square&&R[n]&I[n][l].flag){R[n]^=I[n][l].flag;break}if(R[i])for(l=0,c=I[i].length;l<c;l++)if(r.to===I[i][l].square&&R[i]&I[i][l].flag){R[i]^=I[i][l].flag;break}L=r.flags&b.BIG_PAWN?"b"===P?r.to-16:r.to+16:t,r.piece===o||r.flags&(b.CAPTURE|b.EP_CAPTURE)?O=0:O++,P===e&&N++,P=ar(P)}function or(){var r=k.pop();if(null==r)return null;var n=r.move;w=r.kings,P=r.turn,R=r.castling,L=r.ep_square,O=r.half_moves,N=r.move_number;var t,i,f=P,u=ar(P);if(T[n.from]=T[n.to],T[n.from].type=n.piece,T[n.to]=null,n.flags&b.CAPTURE)T[n.to]={type:n.captured,color:u};else if(n.flags&b.EP_CAPTURE){var l;l=f===e?n.to-16:n.to+16,T[l]={type:o,color:u}}n.flags&(b.KSIDE_CASTLE|b.QSIDE_CASTLE)&&(n.flags&b.KSIDE_CASTLE?(t=n.to+1,i=n.to-1):n.flags&b.QSIDE_CASTLE&&(t=n.to-2,i=n.to+1),T[t]=T[i],T[i]=null);return n}function ir(r,e){var n=z(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var i=t[1],f=t[2],u=t[3],l=t[4]}var c=function(r){var e=r.charAt(0);if(e>="a"&&e<="h"){if(r.match(/[a-h]\d.*[a-h]\d/))return;return o}return"o"===(e=e.toLowerCase())?a:e}(n),s=null,p=H({legal:!0,piece:i||c});if(s=p,e){var v=H({legal:!1,piece:i||c});s=v}for(var g=0,h=s.length;g<h;g++){if(n===z(Z(s[g],p))||e&&n===z(Z(s[g],v)))return s[g];if(t&&(!i||i.toLowerCase()==s[g].piece)&&S[f]==s[g].from&&S[u]==s[g].to&&(!l||l.toLowerCase()==s[g].promotion))return s[g]}return null}function fr(r){return r>>4}function ur(r){return 15&r}function lr(r){var e=ur(r),n=fr(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function ar(r){return r===n?e:n}function cr(r){var e=sr(r);e.san=Z(e,H({legal:!0})),e.to=lr(e.to),e.from=lr(e.from);var n="";for(var t in b)b[t]&e.flags&&(n+=m[t]);return e.flags=n,e}function sr(r){var e=r instanceof Array?[]:{};for(var n in r)e[n]="object"==typeof n?sr(r[n]):r[n];return e}function pr(r){return r.replace(/^\s+|\s+$/g,"")}function vr(r){for(var e=H({legal:!1}),n=0,t=P,o=0,i=e.length;o<i;o++){if(tr(e[o]),!V(t))if(r-1>0)n+=vr(r-1);else n++;or()}return n}return x(void 0===r?s:r),{WHITE:n,BLACK:e,PAWN:o,KNIGHT:i,BISHOP:f,ROOK:u,QUEEN:l,KING:a,SQUARES:function(){for(var r=[],e=S.a8;e<=S.h1;e++)136&e?e+=7:r.push(lr(e));return r}(),FLAGS:m,load:function(r){return x(r)},reset:function(){return U()},moves:function(r){for(var e=H(r),n=[],t=0,o=e.length;t<o;t++)void 0!==r&&"verbose"in r&&r.verbose?n.push(cr(e[t])):n.push(Z(e[t],H({legal:!0})));return n},in_check:function(){return X()},in_checkmate:function(){return Y()},in_stalemate:function(){return rr()},in_draw:function(){return O>=100||rr()||er()||nr()},insufficient_material:function(){return er()},in_threefold_repetition:function(){return nr()},game_over:function(){return O>=100||Y()||rr()||er()||nr()},validate_fen:function(r){return $(r)},fen:function(){return j()},board:function(){for(var r=[],e=[],n=S.a8;n<=S.h1;n++)null==T[n]?e.push(null):e.push({type:T[n].type,color:T[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var e="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",n="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,t=[],o=!1;for(var i in q)t.push("["+i+' "'+q[i]+'"]'+e),o=!0;o&&k.length&&t.push(e);for(var f=function(r){var e=D[j()];void 0!==e&&(r=`${r}${r.length>0?" ":""}{${e}}`);return r},u=[];k.length>0;)u.push(or());var l=[],a="";for(0===u.length&&l.push(f(""));u.length>0;){a=f(a);var c=u.pop();k.length||"b"!==c.color?"w"===c.color&&(a.length&&l.push(a),a=N+"."):a=N+". ...",a=a+" "+Z(c,H({legal:!1})),tr(c)}if(a.length&&l.push(f(a)),void 0!==q.Result&&l.push(q.Result),0===n)return t.join("")+l.join(" ");var s=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},p=function(r,o){for(var i of o.split(" "))if(i){if(r+i.length>n){for(;s();)r--;t.push(e),r=0}t.push(i),r+=i.length,t.push(" "),r++}return s()&&r--,r},v=0;for(i=0;i<l.length;i++)v+l[i].length>n&&l[i].includes("{")?v=p(v,l[i]):(v+l[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(e),v=0):0!==i&&(t.push(" "),v++),t.push(l[i]),v+=l[i].length);return t.join("")},load_pgn:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy;function t(r){return r.replace(/\\/g,"\\")}var o="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+t(o)+")|.)*\\])(?:"+t(o)+"){2}"),f=i.test(r)?i.exec(r)[1]:"";U();var u=function(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",o={},i=r.split(new RegExp(t(n))),f="",u="",l=0;l<i.length;l++)f=i[l].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[l].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),pr(f).length>0&&(o[f]=u);return o}(f,e);for(var l in u)B([l,u[l]]);if(!("1"!==u.SetUp||"FEN"in u&&x(u.FEN,!0)))return!1;for(var a=function(r){return`{${function(r){return Array.from(r).map((function(r){return r.charCodeAt(0)<128?r.charCodeAt(0).toString(16):encodeURIComponent(r).replace(/\%/g,"").toLowerCase()})).join("")}((r=r.replace(new RegExp(t(o),"g")," ")).slice(1,r.length-1))}}`},c=function(r){if(r.startsWith("{")&&r.endsWith("}"))return function(r){return 0==r.length?"":decodeURIComponent("%"+r.match(/.{1,2}/g).join("%"))}(r.slice(1,r.length-1))},s=r.replace(f,"").replace(new RegExp(`({[^}]*})+?|;([^${t(o)}]*)`,"g"),(function(r,e,n){return void 0!==e?a(e):" "+a(`{${n.slice(1)}}`)})).replace(new RegExp(t(o),"g")," "),v=/(\([^\(\)]+\))+?/g;v.test(s);)s=s.replace(v,"");var g=pr(s=(s=(s=s.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));g=g.join(",").replace(/,,+/g,",").split(",");for(var h="",d=0;d<g.length-1;d++){var E=c(g[d]);if(void 0===E){if(null==(h=ir(g[d],n)))return!1;tr(h)}else D[j()]=E}if(void 0!==(E=c(g[g.length-1]))&&(D[j()]=E,g.pop()),h=g[g.length-1],p.indexOf(h)>-1)(function(r){for(var e in r)return!0;return!1})(q)&&void 0===q.Result&&B(["Result",h]);else{if(null==(h=ir(h,n)))return!1;tr(h)}return!0},header:function(){return B(arguments)},ascii:function(){return function(){for(var r="   +------------------------+\n",e=S.a8;e<=S.h1;e++){if(0===ur(e)&&(r+=" "+"87654321"[fr(e)]+" |"),null==T[e])r+=" . ";else{var t=T[e].type;r+=" "+(T[e].color===n?t.toUpperCase():t.toLowerCase())+" "}e+1&136&&(r+="|\n",e+=8)}return r+="   +------------------------+\n",r+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return P},move:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy,t=null;if("string"==typeof r)t=ir(r,n);else if("object"==typeof r)for(var o=H(),i=0,f=o.length;i<f;i++)if(r.from===lr(o[i].from)&&r.to===lr(o[i].to)&&(!("promotion"in o[i])||r.promotion===o[i].promotion)){t=o[i];break}if(!t)return null;var u=cr(t);return tr(t),u},undo:function(){var r=or();return r?cr(r):null},clear:function(){return K()},put:function(r,e){return G(r,e)},get:function(r){return W(r)},remove:function(r){return function(r){var e=W(r);return T[S[r]]=null,e&&e.type===a&&(w[e.color]=t),M(j()),e}(r)},perft:function(r){return vr(r)},square_color:function(r){if(r in S){var e=S[r];return(fr(e)+ur(e))%2==0?"light":"dark"}return null},history:function(r){for(var e=[],n=[],t=(void 0!==r&&"verbose"in r&&r.verbose);k.length>0;)e.push(or());for(;e.length>0;){var o=e.pop();t?n.push(cr(o)):n.push(Z(o,H({legal:!0}))),tr(o)}return n},get_comment:function(){return D[j()]},set_comment:function(r){D[j()]=r.replace("{","[").replace("}","]")},delete_comment:function(){var r=D[j()];return delete D[j()],r},get_comments:function(){return Q(),Object.keys(D).map((function(r){return{fen:r,comment:D[r]}}))},delete_comments:function(){return Q(),Object.keys(D).map((function(r){var e=D[r];return delete D[r],{fen:r,comment:e}}))}}};"undefined"!=typeof exports&&(exports.Chess=Chess),"undefined"!=typeof define&&define((function(){return Chess}));
//# sourceMappingURL=/sm/fffc29627ceb9baeb28658b0ed1a2c4618f6f83cecdeedc018822548b3508939.map